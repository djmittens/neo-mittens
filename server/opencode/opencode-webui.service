[Unit]
Description=OpenCode WebUI Server
After=network-online.target tailscaled.service
Wants=network-online.target

[Service]
Type=simple
WorkingDirectory=%h

# Security: Set a strong password for network access
Environment="OPENCODE_SERVER_PASSWORD=change-me-to-secure-password"
Environment="OPENCODE_SERVER_USERNAME=opencode"

# Start OpenCode web server accessible on all interfaces
ExecStart=/usr/bin/env opencode web --hostname 0.0.0.0 --port 4096

# Restart on failure
Restart=on-failure
RestartSec=10

# Logging
StandardOutput=journal
StandardError=journal
SyslogIdentifier=opencode-webui

[Install]
WantedBy=default.target
