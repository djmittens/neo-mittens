# hypridle config â€” refresh HDR/tone mapping after resume
# This repo is symlinked to ~/.config/hypr by bootstrap.sh

general {
  # lock_cmd = pidof hyprlock >/dev/null || hyprlock
  # before_sleep_cmd = loginctl lock-session
  # Run helper from PATH (bootstrap links it into ~/.local/bin)
  # Use safe mode + small delay to avoid DPMS race on resume
  after_sleep_cmd = hypr-hdr-refresh --safe --delay 2
  ignore_dbus_inhibit = false
}

# Optional: if you also use hypridle to turn displays off when idle,
# you can reapply the refresh on resume from idle:
# listener {
#   timeout = 900
#   on-timeout = hyprctl dispatch dpms off
#   on-resume = hypr-hdr-refresh
# }

# Minimal listener to satisfy hypridle's requirement for at least one rule
listener {
  timeout = 86400   # 24h; effectively a no-op
  on-timeout = /usr/bin/true
  on-resume = /usr/bin/true
}
