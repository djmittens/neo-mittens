{"t": "spec", "spec": "ralph-plan-system.md"}
{"t": "task", "id": "t-wxul", "spec": "ralph-plan-system.md", "name": "Implement ralph task reject command", "s": "p", "notes": "In powerplant/ralph cmd_task function, add reject action that: 1) Gets first done task, 2) Creates tombstone record {\"t\": \"reject\", \"id\": task_id, \"done_at\": commit_hash, \"reason\": reason}, 3) Moves task back to pending (s: \"p\"). Need to update RalphState to track tombstones list and save_state to write them.", "accept": "ralph task reject \"reason\" creates tombstone in plan.jsonl and moves done task to pending"}
{"t": "task", "id": "t-3e2j", "spec": "ralph-plan-system.md", "name": "Update load_state to parse tombstones", "s": "d", "notes": "In powerplant/ralph load_state function (around line 473-495), add handling for t==\"reject\" records. Add Tombstone dataclass with fields: id, done_at, reason. Add tombstones list to RalphState class.", "accept": "load_state correctly parses reject records from plan.jsonl into RalphState.tombstones", "deps": ["t-wxul"], "done_at": "56f8ca0"}
{"t": "task", "id": "t-vdwz", "spec": "ralph-plan-system.md", "name": "Update ralph log --all to show rejected tasks", "s": "d", "notes": "In powerplant/ralph cmd_log function (around line 2895-2992), when reconstructing history: 1) Parse tombstone records from each commit, 2) Add \"rejected\" field to task history output showing {commit, date, reason}, 3) Use tombstones to distinguish accepted vs rejected per spec lines 193-199.", "accept": "ralph log --all output shows rejected field for tasks that have tombstones", "deps": ["t-3e2j"], "done_at": "1735273"}
{"t": "task", "id": "t-duak", "spec": "ralph-plan-system.md", "name": "Update ralph plan to clear tombstones", "s": "d", "notes": "In powerplant/ralph cmd_set_spec function (around line 2867-2892), when clearing tasks also clear tombstones. Update save_state to not write tombstones when state.tombstones is empty (they are ephemeral per spec line 209).", "accept": "Running ralph plan <new-spec> removes all tombstone records from plan.jsonl", "deps": ["t-3e2j"], "done_at": "f5da2dc"}
{"t": "task", "id": "t-xte3", "spec": "ralph-plan-system.md", "name": "Update shell completions for reject", "s": "d", "notes": "In powerplant/ralph-completion.bash line 42 and powerplant/ralph-completion.zsh line 40, add reject to task_subcommands array: (done add accept reject)", "accept": "Tab completion for ralph task shows reject option", "deps": ["t-wxul"], "done_at": "39f237e"}
{"t": "task", "id": "t-x0pj", "spec": "ralph-plan-system.md", "name": "Add tombstone parsing to load_state", "s": "p", "notes": "In load_state function (line 496-506), add: elif t == \"reject\": state.tombstones.append(Tombstone.from_jsonl(d))", "accept": "load_state correctly parses reject records from plan.jsonl into RalphState.tombstones"}
{"t": "task", "id": "t-xkqt", "spec": "ralph-plan-system.md", "name": "Add rejected field to ralph log --all output", "s": "p", "notes": "In cmd_log function, parse tombstone records from each commit and add rejected field to task output showing {commit, date, reason}", "accept": "ralph log --all output shows rejected field for tasks that have tombstones", "deps": ["t-x0pj"]}
{"t": "task", "id": "t-zcrn", "spec": "ralph-plan-system.md", "name": "Clear tombstones in cmd_set_spec", "s": "p", "notes": "In cmd_set_spec function (around line 2942), add: state.tombstones = [] when clearing tasks for new spec", "accept": "Running ralph plan <new-spec> removes all tombstone records from plan.jsonl", "deps": ["t-x0pj"]}
{"t": "task", "id": "t-9itm", "spec": "ralph-plan-system.md", "name": "{\"name\": \"Add reject to shell completions\", \"notes\": \"In ralph-completion.bash line 42, change to: COMPREPLY=\\$(compgen -W \\\"done add accept reject\\\" -- \\\"\\$cur\\\"). In ralph-completion.zsh line 40, change to: task_subcommands=(done add accept reject)\", \"accept\": \"Tab completion for ralph task shows reject option\"}", "s": "p"}
{"t": "reject", "id": "t-wxul", "done_at": "ba30ead", "reason": "load_state does not parse tombstones - missing elif t==\"reject\" handler"}
